(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){e.exports={header:"Searchbar_header__1xxS5",form:"Searchbar_form__Cu6eA",input:"Searchbar_input__1So2L"}},20:function(e,t,a){e.exports={item:"ImageGalleryItem_item__2xsxO",image:"ImageGalleryItem_image__nRpga"}},22:function(e,t,a){e.exports={overlay:"Modal_overlay__3vNLE",modal:"Modal_modal__OGqs0"}},46:function(e,t,a){},6:function(e,t,a){e.exports={Button:"Button_Button__1uQjR",loadMore:"Button_loadMore__2v8dt",searchForm:"Button_searchForm__3X96L",close:"Button_close__2EWww"}},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),s=(a(46),a(4)),i=a(5),l=a(8),u=a(7),d=a(23),h=a(41),m=a(34),p=a.n(m),j=a(6),g=a.n(j),b=a(1),f=["className","onClick","children"];function O(e){var t=e.className,a=e.onClick,n=e.children,r=Object(h.a)(e,f),c=p()(g.a.Button,t);return Object(b.jsx)("button",Object(d.a)(Object(d.a)({},r),{},{onClick:a,className:c,children:n}))}O.defaultProps={onClick:function(){return null},children:null,className:null};var x=a(16),v=a.n(x),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchInput:""},e.handleChange=function(t){e.setState({searchInput:t.currentTarget.value})},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.searchInput.trim())return window.alert("Please, provide search name!"),void e.clear();e.props.onSubmit(e.state.searchInput.toLowerCase().trim()),e.clear()},e.clear=function(){e.setState({searchInput:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)("header",{className:v.a.header,children:Object(b.jsxs)("form",{className:v.a.form,onSubmit:this.handleSubmit,children:[Object(b.jsx)(O,{type:"submit",className:g.a.searchForm,children:Object(b.jsx)("span",{className:"button-label",children:"Search"})}),Object(b.jsx)("input",{className:v.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange,value:this.state.searchInput})]})})}}]),a}(n.Component);y.defaultProps={onSubmit:function(){return null}};var _,w=a(17),S=a(13),C=a(14),I=C.a.div(_||(_=Object(S.a)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  height: auto;\n  padding: 0 15px;\n"])));function k(e){var t=e.children;return Object(b.jsx)(I,{children:t})}var N,L=a(38),B=a.n(L),M=C.a.div(N||(N=Object(S.a)(["\n  height: 150px;\n  width: 150px;\n  margin: 50px auto;\n"])));function R(){return Object(b.jsx)(M,{children:Object(b.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:150,width:150})})}var G=a(2),T=a.n(G),E=a(20),U=a.n(E);function F(e){var t=e.imgUrl,a=e.description,n=e.onClick,r=e.bigImgURL;return Object(b.jsx)("li",{className:U.a.item,children:Object(b.jsx)("img",{src:t,alt:a,srcSet:r,className:U.a.image,onClick:n})})}F.defaultProps={description:"image",bigImgURL:"../src/images/DefaultImage.png"},F.prototypes={imgUrl:T.a.string.isRequired,bigImgURL:T.a.string,description:T.a.string,onClick:T.a.func.isRequired};var V=a(21),D=a.n(V),P=a(39),q=a(40),A=a.n(q),K="https://pixabay.com/api/",J="23596764-fc841aad9a4a9806cf99f02b3";function z(e,t){return H.apply(this,arguments)}function H(){return(H=Object(P.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(K,"?q=").concat(t,"&page=").concat(a,"&key=").concat(J,"&image_type=photo&orientation=horizontal&per_page=9"));case 2:return n=e.sent,e.abrupt("return",n.data.hits);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=a(9),X=a.n(W),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={images:null,error:null,status:"idle",moreLoadStatus:"idle",page:1},e.endElRef=Object(n.createRef)(),e.scrollToBottom=function(){e.endElRef.current.scrollIntoView({behavior:"smooth"})},e.handleButtonClick=function(){e.setState((function(e){return{page:e.page+1}}))},e.handleModalOpen=function(t){e.props.handleModalOpen(t.currentTarget.srcset)},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=e.searchValue,r=t.page,c=this.props.searchValue,o=this.state.page;n!==c&&(this.setState({status:"pending"}),z(c,o).then((function(e){if(0===e.length)throw new Error('Unfortunately, nothing found with search name "'.concat(c,'" :( '));a.setState({images:Object(w.a)(e),status:"resolved"})})).catch((function(e){return a.setState({error:e,status:"rejected"})}))),o!==r&&(this.setState({moreLoadStatus:"pending"}),z(c,o).then((function(e){if(0===e.length)throw new Error("Images with tag ".concat(c," has been finished."));a.setState((function(t){return{images:[].concat(Object(w.a)(t.images),Object(w.a)(e)),moreLoadStatus:"resolved"}})),a.scrollToBottom()})).catch((function(e){return a.setState({error:e,moreLoadStatus:"rejected"})})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.images,r=t.status,c=t.moreLoadStatus;return"idle"===r?Object(b.jsx)(k,{children:Object(b.jsxs)("p",{className:X.a.idleText,children:["Hi! Here you may find beautiful images for inspiration. ",Object(b.jsx)("br",{})," It's easy! Just enter a search name in the box at the top :)"]})}):"pending"===r?Object(b.jsx)(k,{children:Object(b.jsx)(R,{})}):"rejected"===r?Object(b.jsx)(k,{children:Object(b.jsx)("p",{className:X.a.errorText,children:a.message})}):"resolved"===r?Object(b.jsxs)(k,{children:[Object(b.jsx)("h1",{className:X.a.title,children:"Gallery"}),Object(b.jsx)("ul",{className:X.a.galleryGrid,children:n.map((function(t){var a=t.webformatURL,n=t.tags,r=t.largeImageURL;return Object(b.jsx)(F,{imgUrl:a,bigImgURL:r,description:n,onClick:e.handleModalOpen},r)}))}),Object(b.jsx)("div",{ref:this.endElRef}),"pending"===c&&Object(b.jsx)(R,{}),"rejected"===c&&Object(b.jsx)("p",{className:X.a.errorText,children:a.message}),Object(b.jsx)(O,{type:"button",onClick:this.handleButtonClick,className:g.a.loadMore,children:"Load more"})]}):void 0}}]),a}(n.Component),Y=Q,Z=a(22),$=a.n(Z),ee=document.getElementById("modal-portal"),te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(b.jsx)("div",{className:$.a.overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:$.a.modal,children:this.props.children})}),ee)}}]),a}(n.Component);te.defaultProps={onClose:function(){}};var ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchValue:"",largeImage:""},e.onSubmit=function(t){e.setState({searchValue:t})},e.handleModalOpen=function(t){e.setState({largeImage:t})},e.handleModalClose=function(){e.setState({largeImage:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.largeImage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y,{onSubmit:this.onSubmit}),Object(b.jsx)(Y,{searchValue:t,handleModalOpen:this.handleModalOpen}),""!==a&&Object(b.jsxs)(te,{onClose:this.handleModalClose,children:[Object(b.jsx)(O,{type:"button",className:g.a.close,onClick:this.handleModalClose,children:"X"}),Object(b.jsx)("img",{src:a,alt:"#",className:"largeImage"})]})]})}}]),a}(n.Component),ne=ae;o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(ne,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={idleText:"ImageGallery_idleText__2rlGV",errorText:"ImageGallery_errorText__1-G8F",slideRight:"ImageGallery_slideRight__3zPaN",title:"ImageGallery_title__3shVg",galleryGrid:"ImageGallery_galleryGrid__KDq8N"}}},[[87,1,2]]]);
//# sourceMappingURL=main.0a55c363.chunk.js.map