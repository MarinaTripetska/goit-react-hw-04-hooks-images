(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,n){e.exports={header:"Searchbar_header__1TjTc",form:"Searchbar_form__18MlS",input:"Searchbar_input__1bcD_"}},19:function(e,t,n){e.exports={item:"ImageGalleryItem_item__1Vm7r",image:"ImageGalleryItem_image__39MOf"}},21:function(e,t,n){e.exports={overlay:"Modal_overlay__3YtRF",modal:"Modal_modal__2l1hT"}},45:function(e,t,n){},5:function(e,t,n){e.exports={Button:"Button_Button__30I-J",loadMore:"Button_loadMore__smeV0",searchForm:"Button_searchForm__2noQH",close:"Button_close__1yfwT"}},6:function(e,t,n){e.exports={idleText:"ImageGallery_idleText__3NsBN",errorText:"ImageGallery_errorText__8Fps_",slideRight:"ImageGallery_slideRight__7P1Bg",title:"ImageGallery_title__1O25S",galleryGrid:"ImageGallery_galleryGrid__B5fjH"}},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),o=(n(45),n(4)),s=n(22),l=n(40),u=n(33),d=n.n(u),j=n(5),h=n.n(j),m=n(1),b=["className","onClick","children"];function f(e){var t=e.className,n=e.onClick,a=e.children,r=Object(l.a)(e,b),c=d()(h.a.Button,t);return Object(m.jsx)("button",Object(s.a)(Object(s.a)({},r),{},{onClick:n,className:c,children:a}))}f.defaultProps={onClick:function(){return null},children:null,className:null};var g=n(15),p=n.n(g);function O(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],i=r[1];return Object(m.jsx)("header",{className:p.a.header,children:Object(m.jsxs)("form",{className:p.a.form,onSubmit:function(e){if(e.preventDefault(),""===c.trim())return window.alert("Please, provide search name!"),void i("");t(c.toLowerCase().trim()),i("")},children:[Object(m.jsx)(f,{type:"submit",className:h.a.searchForm,children:Object(m.jsx)("span",{className:"button-label",children:"Search"})}),Object(m.jsx)("input",{className:p.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){return i(e.currentTarget.value)},value:c})]})})}O.defaultProps={onSubmit:function(){return null}};var x,_=n(16),v=n(12),y=n(13),w=y.a.div(x||(x=Object(v.a)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  height: auto;\n  padding: 0 15px;\n"])));function N(e){var t=e.children;return Object(m.jsx)(w,{children:t})}var I,S=n(37),k=n.n(S),C=y.a.div(I||(I=Object(v.a)(["\n  height: 150px;\n  width: 150px;\n  margin: 50px auto;\n"])));function T(){return Object(m.jsx)(C,{children:Object(m.jsx)(k.a,{type:"BallTriangle",color:"#00BFFF",height:150,width:150})})}var B=n(2),R=n.n(B),G=n(19),E=n.n(G);function F(e){var t=e.imgUrl,n=e.description,a=e.onClick,r=e.bigImgURL;return Object(m.jsx)("li",{className:E.a.item,children:Object(m.jsx)("img",{src:t,alt:n,srcSet:r,className:E.a.image,onClick:a})})}F.defaultProps={description:"image",bigImgURL:"../src/images/DefaultImage.png"},F.prototypes={imgUrl:R.a.string.isRequired,bigImgURL:R.a.string,description:R.a.string,onClick:R.a.func.isRequired};var L=n(20),M=n.n(L),U=n(38),P=n(39),V=n.n(P),H="https://pixabay.com/api/",J="23596764-fc841aad9a4a9806cf99f02b3";function q(e){return D.apply(this,arguments)}function D(){return D=Object(U.a)(M.a.mark((function e(t){var n,a,r=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.next=3,V.a.get("".concat(H,"?q=").concat(t,"&page=").concat(n,"&key=").concat(J,"&image_type=photo&orientation=horizontal&per_page=9"));case 3:return a=e.sent,e.abrupt("return",a.data.hits);case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var z=n(6),Q=n.n(z),X="idle",Y="pending",A="rejected",K="resolved";function W(e){var t=e.searchValue,n=e.handleModalOpen,r=Object(a.useState)(null),c=Object(o.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(null),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(X),g=Object(o.a)(b,2),p=g[0],O=g[1],x=Object(a.useState)(X),v=Object(o.a)(x,2),y=v[0],w=v[1],I=Object(a.useState)(1),S=Object(o.a)(I,2),k=S[0],C=S[1],B=Object(a.useRef)();return Object(a.useEffect)((function(){""!==t&&(O(Y),q(t).then((function(e){if(0===e.length)throw new Error('Unfortunately, nothing found with search name "'.concat(t,'" :( '));s(Object(_.a)(e)),O(K)})).catch((function(e){j(e),O(A)})))}),[t]),Object(a.useEffect)((function(){1!==k&&(w(Y),q(t,k).then((function(e){if(0===e.length)throw new Error("Images with tag ".concat(t," has been finished."));s((function(t){return[].concat(Object(_.a)(t),Object(_.a)(e))})),w(K);var n=B.current.children;n[n.length-9].scrollIntoView({behavior:"smooth"})})).catch((function(e){j(e),w(A)})))}),[k]),"idle"===p?Object(m.jsx)(N,{children:Object(m.jsxs)("p",{className:Q.a.idleText,children:["Hi! Here you may find beautiful images for inspiration. ",Object(m.jsx)("br",{})," It's easy! Just enter a search name in the box at the top :)"]})}):"pending"===p?Object(m.jsx)(N,{children:Object(m.jsx)(T,{})}):"rejected"===p?Object(m.jsx)(N,{children:Object(m.jsx)("p",{className:Q.a.errorText,children:d.message})}):"resolved"===p?Object(m.jsxs)(N,{children:[Object(m.jsx)("h1",{className:Q.a.title,children:"Gallery"}),Object(m.jsx)("ul",{className:Q.a.galleryGrid,ref:B,children:i.map((function(e){var t=e.largeImageURL,a=e.webformatURL,r=e.tags;return Object(m.jsx)(F,{imgUrl:a,bigImgURL:t,description:r,onClick:function(e){return n(e.currentTarget.srcset)}},t)}))}),"pending"===y&&Object(m.jsx)(T,{}),"rejected"===y&&Object(m.jsx)("p",{className:Q.a.errorText,children:d.message}),Object(m.jsx)(f,{type:"button",onClick:function(){return C((function(e){return e+1}))},className:h.a.loadMore,children:"Load more"})]}):void 0}var Z=n(21),$=n.n(Z),ee=document.getElementById("modal-portal");function te(e){var t=e.onClose,n=e.children;Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&t()};return Object(c.createPortal)(Object(m.jsx)("div",{className:$.a.overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(m.jsx)("div",{className:$.a.modal,children:n})}),ee)}function ne(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),s=i[0],l=i[1],u=function(){return l("")};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O,{onSubmit:function(e){r(e)}}),Object(m.jsx)(W,{searchValue:n,handleModalOpen:function(e){l(e)}}),""!==s&&Object(m.jsxs)(te,{onClose:u,children:[Object(m.jsx)(f,{type:"button",className:h.a.close,onClick:u,children:"X"}),Object(m.jsx)("img",{src:s,alt:"#",className:"largeImage"})]})]})}te.defaultProps={onClose:function(){}},i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(ne,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.f57ac962.chunk.js.map